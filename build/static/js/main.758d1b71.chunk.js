(this["webpackJsonpwgsl-toy"]=this["webpackJsonpwgsl-toy"]||[]).push([[0],{101:function(e,t,n){e.exports={menuarea:"MainArea_menuarea__LCz8n"}},104:function(e,t,n){e.exports={iconbutton:"IconButton_iconbutton__3n6Wd"}},105:function(e,t,n){e.exports={renameinput:"Tabs_renameinput__2GpFz"}},118:function(e,t,n){},119:function(e,t,n){},136:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(25),i=n.n(r),s=(n(118),n(119),n(88)),c=n.n(s),l=n(143),d=n(89),u=n.n(d),p=n(113),f=n(2);function h(e){return Object(f.jsx)(p.a,{placement:"right",title:e.tip,mouseEnterDelay:1,children:Object(f.jsx)("div",{className:u.a.iconbutton,onClick:e.onClick,style:e.style||{},children:e.icon})})}var b,g=function(){return Object(f.jsx)("div",{className:c.a.sidebar,children:Object(f.jsx)(h,{icon:Object(f.jsx)(l.a,{style:{fontSize:40}}),tip:"Go to Github repository page",onClick:function(){window.open("https://github.com/ValeeraJS/WGSL-Toy","_blank")}})})},m=n(75),v=n.n(m),y=(n(124),n(96)),j=n.n(y),x=n(139),S=n(30);function O(e){return e===b.WGSL?"[[location(0)]] var<out> fragColor : vec4<f32>;\n\n[[stage(fragment)]] fn main() -> void {\n    fragColor = vec4<f32>(1.0, 0.0, 0.0, 1.0);\n    return;\n}\n":e===b.ES45?"#version 450\nlayout(location = 0) out vec4 outColor;\n        \nvoid main() {\n    outColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n":""}!function(e){e.WGSL="WGSL",e.ES45="GLSL ES4.5",e.ES30="GLSL ES3.0",e.ES20="GLSL ES2.0"}(b||(b={}));var C=!!document.createElement("canvas").getContext("gpupresent"),k=!!document.createElement("canvas").getContext("webgl2"),w=!!document.createElement("canvas").getContext("webgl"),E=C,L=k,T=w,G={needUpdate:!1,currentCode:O(C?b.WGSL:k?b.ES30:b.ES20),currentShaderType:C?b.WGSL:k?b.ES30:b.ES20,globalShaderType:C?b.WGSL:k?b.ES30:b.ES20,webgpuSupported:C,webgl2Supported:k,webglSupported:w},I=Object(S.b)({name:"shader",initialState:G,reducers:{setNeedUpdate:function(e,t){e.needUpdate=t.payload},setCurrentCode:function(e,t){e.currentCode=t.payload},setCurrentShaderType:function(e,t){e.currentShaderType=t.payload},setGlobalShaderType:function(e,t){e.globalShaderType=t.payload}}}),_=I.actions,P=_.setCurrentCode,R=_.setCurrentShaderType,W=_.setGlobalShaderType,F=_.setNeedUpdate,N=function(e){return e.shader.needUpdate},B=function(e){return e.shader.currentCode},D=function(e){return e.shader.currentShaderType},U=function(e){return e.shader.globalShaderType},A=function(e){return e.shader.webgpuSupported},z=function(e){return e.shader.webgl2Supported},M=function(e){return e.shader.webglSupported},K=I.reducer,$=n(17),q=n(55),Y={activeKey:"hello world",panes:[{title:"HelloWorld",language:b.WGSL,code:O(b.WGSL),isCodePage:!0,key:"hello world",content:""}]},V=Object(S.b)({name:"log",initialState:Y,reducers:{addTab:function(e,t){var n=Object(q.a)(e.panes);n.push(t.payload),e.panes=n},editTab:function(e,t){for(var n=Object(q.a)(e.panes),a=0;a<n.length;a++)if(n[a].key===t.payload.key){n[a]=t.payload;break}e.panes=n},removeTab:function(e,t){for(var n=Object(q.a)(e.panes),a=0;a<n.length;a++)if(n[a].key===t.payload){n.splice(a,1);break}e.panes=n},activeTab:function(e,t){e.activeKey=t.payload},setTabs:function(e,t){e.panes=t.payload}}}),J=V.actions,Q=J.addTab,X=J.activeTab,Z=J.editTab,H=J.removeTab,ee=J.setTabs,te=V.reducer,ne=x.a.DirectoryTree,ae=[{title:"Color",key:"0-0",children:[{title:"1. pure color",key:"0-0-0",isLeaf:!0},{title:"2. color by uv",key:"0-0-1",isLeaf:!0},{title:"3. color by mouse",key:"0-0-2",isLeaf:!0},{title:"4. chess board",key:"0-0-3",isLeaf:!0}]},{title:"Distance Field",key:"0-1",children:[{title:"1. circle",key:"0-1-0",isLeaf:!0},{title:"2. square",key:"0-1-1",isLeaf:!0},{title:"3. ellipse",key:"0-1-2",isLeaf:!0},{title:"4. polygon",key:"0-1-3",isLeaf:!0},{title:"5. star",key:"0-1-4",isLeaf:!0}]},{title:"Noise",key:"0-2",children:[{title:"1. smoke",key:"0-2-0",isLeaf:!0},{title:"2. cloud",key:"0-2-1",isLeaf:!0}]},{title:"Fractal",key:"0-3",children:[{title:"1. julia set",key:"0-3-0",isLeaf:!0},{title:"2. mandelbrot set",key:"0-3-1",isLeaf:!0},{title:"3. fantasy tunnel",key:"0-3-2",isLeaf:!0}]}];var oe,re=function(){var e=Object($.c)(),t=Object($.d)(U);return Object(f.jsxs)("div",{className:j.a.menuarea,children:[Object(f.jsx)("div",{style:{padding:"4px 8px",fontSize:14,color:"white"},children:"Tutorials"}),Object(f.jsx)(ne,{multiple:!0,defaultExpandAll:!0,treeData:ae,onSelect:function(n,a){var o,r;a.node.isLeaf&&fetch((o=a.node.title,r=t,r===b.WGSL?"./wgsl/"+o+".wgsl":r===b.ES45?"./es4.5/"+o+".glsl":o)).then((function(e){return e.text()})).then((function(n){var o=a.node.title+Date.now();e(Q({title:a.node.title,content:"CodePage",key:o,code:n,isCodePage:!0,language:t})),e(X(o)),e(R(t)),e(P(n)),e(F(!0))})).catch((function(e){console.log(e)}))}})]})},ie=n(101),se=n.n(ie),ce=n(26),le=n(70),de=n(23),ue=n(28),pe=n(63),fe=n(62),he=n(138),be=n(141),ge=n(142),me=n(102),ve=n(110),ye=n(71),je=n(32);function xe(e){e.languages.register({id:"wgsl"}),e.languages.setMonarchTokensProvider("wgsl",{comments:{lineComment:"//",blockComment:["/*","*/"]},keywords:["continue","for","switch","if","break","else","case","void","const","true","false","var","var<in>","var<out>","var<uniform>","fn","location","offset","block","struct","binding","group","stage"],ctypes:["vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>"],types:["in","out","uniform","sampler","i32","f32","i32","bool","texture_2d","Uniforms"],funcs:["abs","atan","atan2","clamp","ceil","cos","cross","distance","dot","floor","fma","fract","length","log","log2","max","min","mix","modf","normalize","pow","reflect","sin","smoothStep"],special:["return","fragment","vertex"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,tokenizer:{root:[[/\/\/[^\n]*/,"comment"],[/[a-zA-Z_$<>][\w<>$]*/,{cases:{"@ctypes":"types","@keywords":{token:"keyword.$0"},"@types":"types","@funcs":"funcs","@special":"special","@default":"identifier"}}],[/(@digits)[eE]([-+]?(@digits))?[fFdD]?/,"number"],[/(@digits)\.(@digits)([eE][-+]?(@digits))?[fFdD]?/,"number"],[/(@digits)[fFdD]/,"number"],[/(@digits)[lL]?/,"number"]]}}),e.editor.defineTheme("vs-dark-wgsl",{base:"vs-dark",inherit:!0,rules:[{token:"funcs",foreground:"d0dcaa"},{token:"types",foreground:"4ec9b0"},{token:"special",foreground:"c582b6"},{token:"number",foreground:"b5c078"},{token:"comment",foreground:"529955"}]}),e.languages.registerCompletionItemProvider("wgsl",{provideCompletionItems:function(){return{suggestions:[{label:"ifelse",kind:e.languages.CompletionItemKind.Snippet,insertText:"if (${1:condition}) {\n                    \t$0\n                } else {\n                    \t\n                }",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"If-Else Statement"},{label:"location",kind:e.languages.CompletionItemKind.Snippet,insertText:"[[location(${1:0})]]",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Location Statement"}]}}})}function Se(e){e.languages.register({id:"glsl"}),e.languages.setMonarchTokensProvider("glsl",{comments:{lineComment:"//",blockComment:["/*","*/"]},keywords:["continue","for","switch","if","break","else","case","void","const","true","false","var","var","fn","layout","offset","block","struct","binding","group","stage"],types:["in","out","uniform","sampler","int","float","bool","texture_2d","Uniforms","vec2","vec3","vec4","mat2","mat3","mat4"],funcs:["abs","atan","atan2","clamp","ceil","cos","cross","distance","dot","floor","fma","fract","length","log","log2","main","max","min","mix","modf","normalize","pow","reflect","sin","smoothstep"],special:["#version","return","location"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,tokenizer:{root:[[/\/\/[^\n]*/,"comment"],[/[a-zA-Z_$#][\w$]*/,{cases:{"@keywords":{token:"keyword.$0"},"@types":"types","@funcs":"funcs","@special":"special","@default":"identifier"}}],[/(@digits)[eE]([-+]?(@digits))?[fFdD]?/,"number"],[/(@digits)\.(@digits)([eE][-+]?(@digits))?[fFdD]?/,"number"],[/(@digits)[fFdD]/,"number"],[/(@digits)[lL]?/,"number"]]}}),e.editor.defineTheme("vs-dark-glsl",{base:"vs-dark",inherit:!0,rules:[{token:"funcs",foreground:"d0dcaa"},{token:"types",foreground:"4ec9b0"},{token:"special",foreground:"c582b6"},{token:"number",foreground:"b5c078"},{token:"comment",foreground:"529955"}]}),e.languages.registerCompletionItemProvider("glsl",{provideCompletionItems:function(){return{suggestions:[{label:"ifelse",kind:e.languages.CompletionItemKind.Snippet,insertText:"if (${1:condition}) {\n                    \t$0\n                } else {\n                    \t\n                }",insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"If-Else Statement"}]}}})}var Oe=Object($.b)((function(e){return{tabs:e.tabs,shader:e.shader}}),(function(e){return Object(je.b)({setCurrentCode:P,setCurrentShaderType:R,editTab:Z},e)}))(oe=function(e){Object(pe.a)(n,e);var t=Object(fe.a)(n);function n(){var e;Object(de.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).isCodePage=!0,e.updateCode=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=e.props.tabs.panes,o=Object(me.a)(a);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(r.key===e.props.keyName){var i=Object(ce.a)({},r);i.code=n,e.props.editTab(i);break}}}catch(s){o.e(s)}finally{o.f()}},e}return Object(ue.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.language,a=t.code;return Object(f.jsx)(ye.a,{noClick:!0,noKeyboard:!0,multiple:!1,onDrop:function(t,n,a){if(t.length){var o=new FileReader;o.readAsText(t[0]),o.onload=function(){e.updateCode(o.result||"")}}a.stopPropagation()},children:function(t){var o=t.getRootProps;return Object(f.jsx)("div",Object(ce.a)(Object(ce.a)({style:{height:"100%"}},o()),{},{children:Object(f.jsx)(ve.a,{height:"100%",theme:n===b.WGSL?"vs-dark-wgsl":"vs-dark-glsl",defaultLanguage:n===b.WGSL?"wgsl":"glsl",value:a,onChange:e.updateCode,beforeMount:n===b.WGSL?xe:Se})}))}})}}]),n}(a.Component))||oe,Ce=n(144),ke=n(104),we=n.n(ke);function Ee(e){return Object(f.jsx)("div",{className:we.a.iconbutton,onClick:e.onClick,style:e.style||{},children:e.icon})}var Le,Te=n(105),Ge=n.n(Te),Ie=n(106);function _e(){var e=Object($.d)(U),t=Object($.d)(A),n=Object($.d)(z),a=Object($.d)(M),o=Object($.c)(),r=Object(f.jsxs)(be.a,{onClick:function(e){o(W(e.key))},children:[t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(be.a.Item,{children:"WebGPU: WGSL"},b.WGSL),Object(f.jsx)(be.a.Item,{children:"WebGPU: GLSL ES4.5"},b.ES45)]}),n&&Object(f.jsx)(be.a.Item,{children:"WebGL2: GLSL ES3.0"},b.ES30),a&&Object(f.jsx)(be.a.Item,{children:"WebGL: GLSL ES2.0"},b.ES20),(!t||!n||!a)&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(be.a.Divider,{}),!t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(be.a.Item,{disabled:!0,children:"WebGPU: WGSL"},b.WGSL),Object(f.jsx)(be.a.Item,{disabled:!0,children:"WebGPU: GLSL ES4.5"},b.ES45)]}),!n&&Object(f.jsx)(be.a.Item,{disabled:!0,children:"WebGL2: GLSL ES3.0"},b.ES30),!a&&Object(f.jsx)(be.a.Item,{disabled:!0,children:"WebGL: GLSL ES2.0"},b.ES20)]})]});return Object(f.jsx)(ge.a,{overlay:r,children:Object(f.jsxs)("span",{style:{color:"#cccccc",cursor:"pointer",lineHeight:"40px",display:"flex"},children:["Language: ",e]})})}var Pe=he.a.TabPane,Re=function(e){Object(pe.a)(n,e);var t=Object(fe.a)(n);function n(){var e;Object(de.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={name:e.props.name,isEdit:!1},e.rename=function(){e.setState({isEdit:!0})},e.finishEdit=function(){e.setState({isEdit:!1}),e.props.onRenameTab(e.state.name,e.props.keyId)},e.changeName=function(t){e.setState({name:t.target.value})},e.textSelect=function(e){e.stopPropagation()},e.onDel=function(){var t,n;null===(t=(n=e.props).onDel)||void 0===t||t.call(n,e.props.keyId)},e.onSaveCode=function(){var t,n;null===(t=(n=e.props).onSaveCode)||void 0===t||t.call(n,e.props.keyId,e.state.name)},e.onCopyPage=function(){var t,n;null===(t=(n=e.props).onCopyPage)||void 0===t||t.call(n,e.props.keyId,e.state.name)},e.onCloseOther=function(){var t,n;null===(t=(n=e.props).onCloseOther)||void 0===t||t.call(n,e.props.keyId)},e.onCloseRight=function(){var t,n;null===(t=(n=e.props).onCloseRight)||void 0===t||t.call(n,e.props.keyId)},e.contextMenu=Object(f.jsxs)(be.a,{children:[Object(f.jsx)(be.a.Item,{onClick:e.rename,children:"Rename"},"1"),Object(f.jsx)(be.a.Item,{onClick:e.onCopyPage,children:"Copy"},"2"),Object(f.jsx)(be.a.Item,{onClick:e.onSaveCode,children:"Download Code"},"3"),Object(f.jsx)(be.a.Divider,{}),Object(f.jsx)(be.a.Item,{onClick:e.onDel,children:"Close"},"4"),Object(f.jsx)(be.a.Item,{onClick:e.onCloseOther,children:"Close other tabs"},"5"),Object(f.jsx)(be.a.Item,{onClick:e.onCloseRight,children:"Close tabs to the right"},"6")]}),e.checkFinishEdit=function(t){13===t.keyCode&&e.finishEdit()},e}return Object(ue.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.isEdit;return Object(f.jsx)(ge.a,{overlay:this.contextMenu,trigger:["contextMenu"],children:Object(f.jsx)("span",{children:n?Object(f.jsx)("input",{maxLength:16,onSelect:this.textSelect,type:"text",value:t,className:Ge.a.renameinput,onBlur:this.finishEdit,onChange:this.changeName,onKeyDown:this.checkFinishEdit}):Object(f.jsxs)(f.Fragment,{children:[t||"Untitled",We(this.props.language)]})})})}}]),n}(a.Component);function We(e){return e===b.WGSL?".wgsl":".glsl"}var Fe=Object($.b)((function(e){return{tabs:e.tabs,shader:e.shader}}),(function(e){return Object(je.b)({setNeedUpdate:F,setCurrentCode:P,setCurrentShaderType:R,addTab:Q,activeTab:X,removeTab:H,editTab:Z,setTabs:ee},e)}))(Le=function(e){Object(pe.a)(n,e);var t=Object(fe.a)(n);function n(){var e;Object(de.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).newTabIndex=0,e.onChange=function(t){e.props.tabs.panes.forEach((function(n,a){n.key===t&&n.isCodePage&&(e.props.setCurrentCode(n.code),e.props.setCurrentShaderType(n.language),e.props.setNeedUpdate(!0))})),e.props.activeTab(t)},e.onRenameTab=function(t,n){e.props.tabs.panes.forEach((function(a,o){if(a.key===n){var r=Object(ce.a)({},a);r.title=t,e.props.editTab(r)}}))},e.onEdit=function(t,n){Object(le.a)(e)[n](t)},e.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.props.shader.globalShaderType,r=t+"".concat(Date.now()),i={title:n,content:"CodePage",language:o,code:a||O(o),isCodePage:!0,key:r};e.props.addTab(i),e.props.activeTab(r),e.props.setCurrentCode(a),e.props.setCurrentShaderType(o)},e.remove=function(t){var n=e.props.tabs,a=n.activeKey,o=n.panes,r=a,i=-1;o.forEach((function(e,n){e.key===t&&(i=n-1)}));var s=o.filter((function(e){return e.key!==t}));s.length&&r===t&&(r=i>=0?s[i].key:s[0].key),e.props.removeTab(t),e.props.activeTab(r)},e.onSaveCode=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Untitled";e.props.tabs.panes.forEach((function(e){if(e.key===t){var a=new Blob([e.code||""],{type:"text/plain"});Ie.a.download(a,(n||"Untitled")+We(e.language))}}))},e.onCopyPage=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Untitled";e.props.tabs.panes.forEach((function(a){a.key===t&&e.add("copy",n+" Copy",a.code,a.language)}))},e.onCloseOther=function(t){var n=[];e.props.tabs.panes.forEach((function(e){e.key===t&&n.push(e)})),e.props.setTabs(n)},e.onCloseRight=function(t){var n=!1,a=[];e.props.tabs.panes.forEach((function(e){n||a.push(e),e.key===t&&(n=!0)})),e.props.setTabs(a)},e.runCode=function(){var t=e.props.tabs,n=t.activeKey;t.panes.forEach((function(t){t.key===n&&(e.props.setCurrentShaderType(t.language),e.props.setCurrentCode(t.code),e.props.setNeedUpdate(!0))}))},e}return Object(ue.a)(n,[{key:"render",value:function(){var e=this,t=this.props.tabs,n=t.panes,a=t.activeKey;return Object(f.jsx)(ye.a,{noClick:!0,noKeyboard:!0,multiple:!0,onDrop:function(t,n,a){if(t.length)for(var o=function(n){var a=new FileReader;a.readAsText(t[n]),a.onload=function(){e.add(t[n].name,t[n].name,a.result)}},r=0;r<t.length;r++)o(r)},children:function(t){var o=t.getRootProps;return Object(f.jsx)("div",Object(ce.a)(Object(ce.a)({style:{height:"100%"}},o()),{},{children:Object(f.jsx)(he.a,{type:"editable-card",onChange:e.onChange,activeKey:a,onEdit:e.onEdit,tabBarExtraContent:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(_e,{}),Object(f.jsx)(Ee,{onClick:e.runCode,icon:Object(f.jsx)(Ce.a,{style:{fontSize:"24px"}})})]}),children:n.map((function(t){if(t.isCodePage){var n=Object(f.jsx)(Re,{name:t.title,keyId:t.key,language:t.language,onRenameTab:e.onRenameTab,onCloseRight:e.onCloseRight,onCloseOther:e.onCloseOther,onDel:e.remove,onSaveCode:e.onSaveCode,onCopyPage:e.onCopyPage}),a=Object(f.jsx)(Oe,{language:t.language,code:t.code,keyName:t.key});return Object(f.jsx)(Pe,{tab:n,closable:!0,children:a},t.key)}return"Unknown Page"}))})}))}})}}]),n}(a.Component))||Le;var Ne,Be=function(){return Object(f.jsx)("div",{className:se.a.menuarea,children:Object(f.jsx)(Fe,{})})},De=n(47),Ue=n.n(De),Ae=n(145);!function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error",e.SUCCESS="success"}(Ne||(Ne={}));var ze=[{type:Ne.INFO,text:"Welcome to use WGSL-Toy. Try your first shader program.",date:Date.now()}];E||ze.push({type:Ne.WARNING,text:"Your browser does not support WebGPU. You might not be able to use WGSL or GLSL ES4.5. Please use Chrome Canary.",date:Date.now()}),L||ze.push({type:Ne.WARNING,text:"Your browser does not support WebGL2. You might not be able to use GLSL ES3.5. Please use modern browsers such as Chrome, Firefox, Safari.",date:Date.now()}),T||ze.push({type:Ne.WARNING,text:"Your browser does not support WebGL. You might not be able to use GLSL ES2.0. Please use modern browsers such as Chrome, Firefox, Safari.",date:Date.now()});var Me={messages:ze},Ke=Object(S.b)({name:"log",initialState:Me,reducers:{setMessage:function(e,t){t.payload instanceof Array?e.messages=t.payload:e.messages=[t.payload]},pushMessage:function(e,t){var n=Object(q.a)(e.messages);t.payload instanceof Array?n=n.concat(t.payload):n.push(t.payload),e.messages=n}}}),$e=Ke.actions,qe=$e.setMessage,Ye=($e.pushMessage,function(e){return e.logInfo.messages}),Ve=Ke.reducer;function Je(){var e=Object($.c)(),t=Object($.d)(Ye);return Object(f.jsxs)("div",{className:Ue.a.consolebar,children:[Object(f.jsxs)("div",{className:Ue.a.titleline,children:["Log",Object(f.jsx)(Ee,{icon:Object(f.jsx)(Ae.a,{}),style:{float:"right"},onClick:function(){e(qe([]))}})]}),Object(f.jsx)("div",{className:Ue.a.messagebox,children:t.map((function(e){return e.type===Ne.WARNING?Object(f.jsx)("div",{className:Ue.a.warning,children:e.text},e.text):e.type===Ne.SUCCESS?Object(f.jsx)("div",{className:Ue.a.success,children:e.text},e.text):Object(f.jsx)("div",{className:Ue.a.info,children:e.text},e.text)}))})]})}var Qe=n(66),Xe=n.n(Qe),Ze=n(107),He=n(146),et=n(147),tt=Object(S.b)({name:"log",initialState:{fps:0,fullscreen:!1},reducers:{setFPS:function(e,t){e.fps=t.payload},setFullscreen:function(e,t){e.fullscreen=t.payload}}}),nt=tt.actions,at=nt.setFPS,ot=nt.setFullscreen,rt=function(e){return e.runtime.fps},it=function(e){return e.runtime.fullscreen},st=tt.reducer,ct=n(34),lt=n.n(ct),dt=n(45),ut=function e(t,n,a){Object(de.a)(this,e),this.elementSize=n.BYTES_PER_ELEMENT,this.gpuBuffer=t.createBuffer({size:n.byteLength,usage:a,mappedAtCreation:!0}),new Float32Array(this.gpuBuffer.getMappedRange()).set(n),this.gpuBuffer.unmap()},pt="bgra8unorm",ft={colorAttachments:[{attachment:null,loadValue:{r:0,g:0,b:0,a:1}}]},ht=function(){function e(t,n){Object(de.a)(this,e),this.device=void 0,this.canvas=void 0,this.context=void 0,this.swapChain=void 0,this.format="",this.commandEncoder=void 0,this.passEncoder=void 0,this.device=t,this.canvas=n,this.context=n.getContext("gpupresent"),this.context&&(this.swapChain=this.context.configureSwapChain({device:t,format:pt}),this.format=pt)}return Object(ue.a)(e,[{key:"clear",value:function(){this.commandEncoder=this.device.createCommandEncoder();var e=this.swapChain.getCurrentTexture().createView();ft.colorAttachments[0].attachment=e,this.passEncoder=this.commandEncoder.beginRenderPass(ft)}},{key:"end",value:function(){this.passEncoder.endPass(),this.device.queue.submit([this.commandEncoder.finish()])}},{key:"render",value:function(e,t){var n=e.pipeline||e.updatePipeline().pipeline;window.p=n,this.device.queue.writeBuffer(e.uniformBuffer,0,t.buffer,t.byteOffset,t.byteLength),this.passEncoder.setBindGroup(0,e.uniformBindGroup),this.passEncoder.setPipeline(n);for(var a=0;a<e.geometry.nodes.length;a++)this.passEncoder.setVertexBuffer(a,e.geometry.nodes[a].buffer.gpuBuffer);this.passEncoder.draw(e.geometry.length,1,0,0)}}]),e}(),bt={stride:2,offset:0,format:"float32x2"},gt=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt;Object(de.a)(this,e),this.name=n,this.buffer=t,this.stride=a.stride,this.offset=a.offset,this.format=a.format}return Object(ue.a)(e,[{key:"toPipelineBuffer",value:function(e){return{arrayStride:this.stride*this.buffer.elementSize,attributes:[{shaderLocation:e,offset:this.offset,format:this.format}]}}}]),e}(),mt=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(de.a)(this,e),this.type=t,this.length=n,this.nodes=a},vt=Object(S.a)({reducer:{shader:K,logInfo:Ve,runtime:st,tabs:te}});function yt(e,t){var n=Date.now();e.pushErrorScope("validation");var a=e.createShaderModule({code:t});return e.popErrorScope().then((function(e){if(e)vt.dispatch(qe({type:Ne.ERROR,text:e.message,date:Date.now()}));else{var t=Date.now()-n;vt.dispatch(qe([{type:Ne.SUCCESS,text:"Shader compiled successfully.",date:Date.now()},{type:Ne.SUCCESS,text:"Compiled in ".concat(t," ms."),date:Date.now()}]))}})),a}function jt(e,t,n){var a,o=Date.now();e.pushErrorScope("validation");try{a=n.compileGLSL(t,"fragment")}catch(i){return void vt.dispatch(qe({type:Ne.ERROR,text:i.message,date:Date.now()}))}var r=e.createShaderModule({code:a});return e.popErrorScope().then((function(e){if(e)vt.dispatch(qe({type:Ne.ERROR,text:e.message,date:Date.now()}));else{var t=Date.now()-o;vt.dispatch(qe([{type:Ne.SUCCESS,text:"Shader compiled successfully.",date:Date.now()},{type:Ne.SUCCESS,text:"Compiled in ".concat(t," ms."),date:Date.now()}]))}})),r}var xt=function(){function e(t,n,a,o){Object(de.a)(this,e),this.glslang=o,this.vs=n,this.fs=a,this.device=t,this.vertexStage={module:t.createShaderModule({code:n}),entryPoint:"main"},this.fragmentStage={module:yt(t,a),entryPoint:"main"}}return Object(ue.a)(e,[{key:"changeFS",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.fs=e;var n=t?jt(this.device,e,this.glslang):yt(this.device,e);n&&(this.fragmentStage={module:n,entryPoint:"main"})}}]),e}(),St=function(){function e(t,n,a){Object(de.a)(this,e),this.device=t,this.geometry=n,this.material=a,this.pipeline=null,this.createUniform()}return Object(ue.a)(e,[{key:"createUniform",value:function(){this.uniformBuffer=this.device.createBuffer({size:20,usage:window.GPUBufferUsage.UNIFORM|window.GPUBufferUsage.COPY_DST}),this.bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:window.GPUShaderStage.FRAGMENT,type:"uniform-buffer"}]})}},{key:"updatePipeline",value:function(){for(var e=[],t=0;t<this.geometry.nodes.length;t++)e.push(this.geometry.nodes[t].toPipelineBuffer(t));return this.pipelineLayout=this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]}),this.pipeline=this.device.createRenderPipeline({layout:this.pipelineLayout,vertexStage:this.material.vertexStage,fragmentStage:this.material.fragmentStage,primitiveTopology:this.geometry.type,colorStates:[{format:"bgra8unorm"}],vertexState:{vertexBuffers:e}}),window.mesh=this,this.uniformBindGroup=this.device.createBindGroup({layout:this.pipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.uniformBuffer}}]}),this}}]),e}(),Ot=void 0;function Ct(){return kt.apply(this,arguments)}function kt(){return(kt=Object(dt.a)(lt.a.mark((function e(){var t;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Ot){e.next=2;break}return e.abrupt("return",Ot);case 2:return e.next=4,import("https://unpkg.com/@webgpu/glslang@0.0.15/dist/web-devel/glslang.js");case 4:return t=e.sent,e.next=7,t.default();case 7:return Ot=e.sent,e.abrupt("return",Ot);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e){var t=Object($.d)(D),n=Object($.d)(B),a=Object($.d)(N),o=Object($.c)();return n&&(t===b.WGSL||t===b.ES45)&&a&&(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Et&&(Et.changeFS(e,t),Lt.updatePipeline(),cancelAnimationFrame(Rt),Rt=Pt())}(n,t===b.ES45),o(F(!1))),Object(f.jsx)("canvas",{id:e.id,width:e.width,height:e.height,style:{display:t===b.WGSL||t===b.ES45?"auto":"none"}})}var Et,Lt,Tt=new Float32Array([0,0,0,0,0]),Gt=performance.now(),It=0;function _t(){return(_t=Object(dt.a)(lt.a.mark((function e(t){var n,a,o,r,i,s,c,l,d,u;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(){return i.clear(),Tt[4]=performance.now()/1e3,i.render(Lt,Tt),i.end(),It=performance.now()-Gt,Gt=performance.now(),Rt=requestAnimationFrame(u)},e.next=3,Ct();case 3:return a=e.sent,e.next=6,null===(n=navigator.gpu)||void 0===n?void 0:n.requestAdapter();case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return",(function(){}));case 9:return e.next=11,o.requestDevice();case 11:if(r=e.sent){e.next=14;break}return e.abrupt("return",(function(){}));case 14:return i=new ht(r,t),s=new Float32Array([-1,1,-1,-1,1,-1,-1,1,1,-1,1,1]),c=new ut(r,s,GPUBufferUsage.VERTEX),l=new gt(c,"vertices",{stride:2,offset:0,format:"float32x2"}),Et=new xt(r,Wt.vertex,O(b.WGSL),a),d=new mt("triangle-list",6,[l]),Lt=new St(r,d,Et),setInterval((function(){vt.dispatch(at(1e3/It))}),1e3),e.abrupt("return",u);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pt,Rt,Wt={vertex:"[[builtin(position)]] var<out> out_position : vec4<f32>;\n[[location(0)]] var<in> a_position : vec2<f32>;\n[[location(0)]] var<out> fragCoord : vec2<f32>;\n[[stage(vertex)]]\nfn main() -> void {\n\tout_position = vec4<f32>(a_position, 0.0, 1.0);\n    fragCoord = a_position;\n\treturn;\n}\n"};function Ft(e){Tt[0]=e.offsetX,Tt[1]=e.offsetY}var Nt=setInterval((function(){var e=document.getElementById("webgpuTarget");e&&(e.addEventListener("mousemove",Ft),clearInterval(Nt),function(e){return _t.apply(this,arguments)}(e).then((function(e){Pt=e,null===e||void 0===e||e()})))}),100);var Bt=function(e){var t=Object($.c)(),n=Object($.d)(rt),a=Object($.d)(D),o=Object($.d)(it),r=Object(Ze.a)(),i=r.width,s=r.height,c=r.ref;return Tt[2]=i||0,Tt[3]=s||0,Object(f.jsxs)("div",{className:Xe.a.rightside,ref:c,children:[Object(f.jsx)(wt,{id:"webgpuTarget",width:i,height:s}),Object(f.jsx)("canvas",{id:"webgl2Target",width:i,height:s,style:{display:a===b.ES30?"auto":"none"}}),Object(f.jsx)("canvas",{id:"webglTarget",width:i,height:s,style:{display:a===b.ES20?"auto":"none"}}),Object(f.jsxs)("div",{className:Xe.a.toolbar,children:[Object(f.jsxs)("span",{className:Xe.a.sizetext,children:[i,"\xd7",s]}),Object(f.jsxs)("span",{className:Xe.a.sizetext,children:[n.toFixed(2),"fps"]}),Object(f.jsx)(Ee,{icon:o?Object(f.jsx)(He.a,{}):Object(f.jsx)(et.a,{}),onClick:function(){var e;o?(document.exitFullscreen(),t(ot(!1))):(null===(e=c.current)||void 0===e||e.requestFullscreen(),t(ot(!0)))}})]})]})};var Dt=function(){return Object(f.jsxs)(v.a,{primaryIndex:1,secondaryInitialSize:250,children:[Object(f.jsxs)("div",{style:{display:"flex",height:"100vh"},children:[Object(f.jsx)(g,{}),Object(f.jsx)(re,{})]}),Object(f.jsxs)(v.a,{secondaryInitialSize:250,children:[Object(f.jsxs)(v.a,{vertical:!0,secondaryInitialSize:250,children:[Object(f.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(f.jsx)(Be,{})}),Object(f.jsx)(Je,{})]}),Object(f.jsx)(Bt,{})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)($.a,{store:vt,children:Object(f.jsx)(Dt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},47:function(e,t,n){e.exports={consolebar:"ConsoleBar_consolebar__V-B47",titleline:"ConsoleBar_titleline__2cLTU",messagebox:"ConsoleBar_messagebox__Zz3OW",warning:"ConsoleBar_warning__1Oejt",success:"ConsoleBar_success__X0igC",error:"ConsoleBar_error__2qqR8",info:"ConsoleBar_info__QL1rJ"}},66:function(e,t,n){e.exports={rightside:"RightSide_rightside__1vr7N",toolbar:"RightSide_toolbar__36RvB",sizetext:"RightSide_sizetext__3AIAx"}},88:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__qe8Sq"}},89:function(e,t,n){e.exports={iconbutton:"IconButton_iconbutton__1mzQp"}},96:function(e,t,n){e.exports={menuarea:"MenuArea_menuarea__-SQvI"}}},[[136,1,2]]]);
//# sourceMappingURL=main.758d1b71.chunk.js.map